<!-- Project Cards Section -->
<section id="{{ include.id | default: 'projects' }}" class="projects-section {{ include.class }}">
  <div class="container">
  {% if include.title or include.desc %}
  <div class="section-header text-center">
    {% if include.title %}
    <h2 class="section-heading" id="{{ include.title | default: "" }}">{{ include.title }}</h2>
    {% endif %}
    {% if include.desc %}
    <p class="section-description">{{ include.desc | asciidocify }}</p>
    {% endif %}
  </div>
  {% endif %}

  <div class="projects-grid {% if include.size %}size-{{ include.size }}{% endif %}">
    {% if include.cards %}
      <!-- Custom defined cards -->
      {% for card in include.cards %}
        {% assign default_href = "/projects/#" | append: card.slug %}
        {% if card.page %}
          {% assign default_href = "/projects/" | append: card.slug %}
        {% endif %}
        <div class="project-card" data-href="{{ card.href | default: default_href }}">
        <div class="project-header">
          <i data-lucide="{{ card.icon | default: 'layers' }}" class="project-icon"></i>
          <h3>{{ card.title | default: card.text | default: card.name }}</h3>
        </div>
        <div class="project-content">
          {% if card.card == "readme" %}
            {{ site.data.built.attrs[card.slug] | asciidocify }}
          {% else %}
            {{ card.card | default: card.desc | asciidocify }}
          {% endif %}
        </div>
        {% if card.tags and include.show_tags != false %}
        <div class="meta-list">
          {% for tag in card.tags limit:6 %}
          <span class="meta-label">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
        </div>
      {% endfor %}
    {% elsif include.nodes %}
      <!-- Data-driven cards from projects -->
      {% assign starred_projects = include.nodes | where: 'star', true %}
      {% for project in starred_projects %}
        {% assign default_href = "/projects/#" | append: project.slug %}
      <div class="project-card" data-href="{{ project.href | default: default_href }}">
      <div class="project-header">
        <i data-lucide="{{ project.icon | default: 'layers' }}" class="project-icon"></i>
        <h3>{{ project.name | default: project.title }}</h3>
      </div>
      <div class="project-content">
        {{ project.desc | default: project.text | asciidocify }}
      </div>
    {% if project.tags and include.show_tags != false and include.show_tags != 'false' %}
      <div class="meta-list">
        {% for tag in project.tags limit:6 %}
        <span class="meta-label">{{ tag }}</span>
        {% endfor %}
      </div>
    {% endif %}
      </div>
      {% endfor %}
    {% endif %}
  </div>
  </div>
</section>
